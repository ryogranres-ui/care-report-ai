<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Care Report AI｜共有・報告＆指示サポート</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./app.css" />
</head>
<body>
  <header class="app-header">
    <div class="app-header-inner">
      <h1 class="app-title">Care Report AI</h1>
      <p class="app-subtitle">
        介護現場の「共有・報告」と「指示」を、誰でも伝わる形に整えるAIサポートツール
      </p>
    </div>
  </header>

  <main class="app-main">
    <!-- 入力エリア -->
    <section class="panel panel-input">
      <h2 class="panel-title">入力エリア</h2>

      <!-- モード切替 -->
      <div class="card">
        <div class="field">
          <label for="modeSelect" class="field-label">モード</label>
          <select id="modeSelect" class="field-input">
            <option value="report">共有・報告モード</option>
            <option value="instruction">指示モード</option>
          </select>
          <p id="modeDescription" class="field-hint">
            現在は「共有・報告モード」です。事故・状態変化・申し送りなどの報告に使います。
          </p>
        </div>
      </div>

      <!-- 基本情報 -->
      <div class="card">
        <h3 class="card-title">基本情報</h3>

        <div class="field">
          <label for="reporterName" class="field-label">作成者名</label>
          <input
            id="reporterName"
            class="field-input"
            type="text"
            placeholder="例）佐藤 太郎"
          />
          <p class="field-hint">氏名のみでOKです（役職は不要）。</p>
        </div>

        <div class="field">
          <label for="userName" class="field-label">対象利用者／対象者</label>
          <input
            id="userName"
            class="field-input"
            type="text"
            placeholder="例）加藤洋子様（イニシャルでも可）"
          />
          <p id="hint-userName" class="field-hint"></p>
        </div>

        <div class="field">
          <label for="eventDateTime" class="field-label">日時</label>
          <input id="eventDateTime" class="field-input" type="datetime-local" />
          <p id="hint-eventDateTime" class="field-hint"></p>
        </div>

        <div class="field">
          <label for="eventPlace" class="field-label">場所</label>
          <input
            id="eventPlace"
            class="field-input"
            type="text"
            placeholder="例）2階 食堂 入口付近"
          />
          <p id="hint-eventPlace" class="field-hint"></p>
        </div>
      </div>

      <!-- 内容入力 -->
      <div class="card">
        <h3 class="card-title">内容</h3>

        <div class="field">
          <label for="summary" class="field-label" id="label-summary">
            概要（ひとことで言うと？）
          </label>
          <textarea
            id="summary"
            class="field-input field-textarea"
            rows="2"
            placeholder="例）歩行中に転倒し、右膝を打撲された。意識は清明。"
          ></textarea>
          <p id="hint-summary" class="field-hint"></p>
        </div>

        <div class="field">
          <label for="details" class="field-label" id="label-details">
            詳しい状況・経過
          </label>
          <textarea
            id="details"
            class="field-input field-textarea"
            rows="3"
            placeholder="例）転倒前の様子、きっかけ、転倒後の訴えなどを記載します。"
          ></textarea>
          <p id="hint-details" class="field-hint"></p>
        </div>

        <div class="field">
          <label for="actions" class="field-label" id="label-actions">
            実施した対応／具体的な指示内容
          </label>
          <textarea
            id="actions"
            class="field-input field-textarea"
            rows="3"
            placeholder="例）バイタル測定、アイシング実施、看護師へ報告 など"
          ></textarea>
          <p id="hint-actions" class="field-hint"></p>
        </div>

        <div class="field">
          <label for="goal" class="field-label" id="label-goal">
            今後の対応・ゴール／報告ライン
          </label>
          <textarea
            id="goal"
            class="field-input field-textarea"
            rows="2"
            placeholder="例）今夜は2時間ごとに状態確認し、変化があれば看護師へ報告。"
          ></textarea>
          <p id="hint-goal" class="field-hint"></p>
        </div>
      </div>

      <!-- バイタル・違和感 -->
      <div class="card">
        <h3 class="card-title">追加情報（任意）</h3>

        <!-- 数値入力のバイタル -->
        <div class="field">
          <label class="field-label">バイタル／数値情報</label>

          <div class="vital-grid">
            <div>
              <label>体温（℃）</label>
              <input
                id="tempInput"
                type="number"
                step="0.1"
                class="field-input"
                placeholder="例：37.8"
              />
            </div>
            <div>
              <label>血圧（収縮）</label>
              <input
                id="bpSysInput"
                type="number"
                class="field-input"
                placeholder="例：132"
              />
            </div>
            <div>
              <label>血圧（拡張）</label>
              <input
                id="bpDiaInput"
                type="number"
                class="field-input"
                placeholder="例：74"
              />
            </div>
            <div>
              <label>脈拍（bpm）</label>
              <input
                id="pulseInput"
                type="number"
                class="field-input"
                placeholder="例：88"
              />
            </div>
            <div>
              <label>SpO2（％）</label>
              <input
                id="spo2Input"
                type="number"
                class="field-input"
                placeholder="例：97"
              />
            </div>
          </div>

          <p id="hint-vital" class="field-hint">
            測定していない項目は空欄でOKです。
          </p>
        </div>

        <div class="field">
          <label for="concern" class="field-label">
            職員として感じた違和感・注意してほしい点
          </label>
          <textarea
            id="concern"
            class="field-input field-textarea"
            rows="2"
            placeholder="例）いつもより会話が少なく、表情が乏しい印象あり。"
          ></textarea>
          <p id="hint-concern" class="field-hint">
            「なんとなく気になる」「いつもと違う」という感覚も、立派な情報です。
          </p>
        </div>
      </div>

      <!-- ボタン -->
      <div class="button-row">
        <button id="btnGenerate" class="btn btn-primary">
          ① AI用の文章を作る
        </button>
        <button id="btnEvaluate" class="btn btn-secondary">
          ② 管理者目線でチェックしてもらう
        </button>
      </div>
    </section>

    <!-- 出力エリア -->
    <section class="panel panel-output">
      <h2 class="panel-title">AIが整えた文章＆フィードバック</h2>

      <!-- ローカルスコア -->
      <div class="card score-card">
        <div class="score-main">
          <div>
            <p class="score-label">ローカルスコア（入力の充実度）</p>
            <p id="localScoreValue" class="score-value">—</p>
          </div>
          <div class="score-tags">
            <span id="localScoreLevel" class="score-tag">未評価</span>
          </div>
        </div>
        <div id="localScoreDetail" class="score-detail">
          フォームに入力すると、自動的に不足している視点をお知らせします。
        </div>
      </div>

      <!-- 生成された文章 -->
      <div class="card">
        <h3 class="card-title">AIに渡す文章（コピー＆共有用）</h3>
        <p class="field-hint">
          施設内の申し送りや、他システムへの転記などにコピーして使えます。
        </p>
        <pre id="generatedReport" class="report-area"></pre>
      </div>

      <!-- AIフィードバック -->
      <div class="card">
        <h3 class="card-title">AIフィードバック（管理者・看護師目線）</h3>
        <div class="ai-score-row">
          <p class="score-label">AIスコア</p>
          <p id="aiScoreValue" class="score-value score-value-small">—</p>
        </div>
        <div id="aiFeedback" class="ai-feedback"></div>

        <details class="rewrite-block">
          <summary>AIによる「書き直し例」を見る</summary>
          <pre id="aiRewrite" class="report-area"></pre>
        </details>
      </div>

      <!-- エラー -->
      <div id="errorMessage" class="error-message" role="alert"></div>
    </section>
  </main>

  <footer class="app-footer">
    <p>© 2025 Care Report AI / GRANRES</p>
  </footer>

  <script src="./app.js"></script>
</body>
</html>

